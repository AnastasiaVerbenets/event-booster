{"version":3,"file":"index.js","sources":["../src/js/fetchEvents.js","../src/templates/card.js","../src/js/baseMarkUp.js","../src/templates/modalCard.js","../src/js/modalCardsRender.js"],"sourcesContent":["export default class EventsApiService {\n  #API_KEY = 'cAC0PQfupJc4LZexavuatT33ADOVunkK';\n  #BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\n  constructor() {\n    this.page = 0;\n    this.pageSize = 12;\n    this.searchQuery = '';\n  }\n\n  async fetchEvents({ id = null } = {}) {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n      page: this.page,\n      size: this.pageSize,\n      keyword: this.searchQuery,\n    });\n    const url = id ? `${this.#BASE_URL}/${id}?${searchParams}` : `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n    // const url = `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch events');\n    }\n    return response.json();\n  }\n}","export default function markUpEvents(events) {\n  const markUp = events\n    .map(\n      event => {\n        const imgUrl = event.images[0]?.url || '';\n        const artist = event.name || 'No name avaible';\n        const date = event.dates.start.localDate || 'Unknown Date';\n        const location = event._embedded?.venues[0].name || 'Unknown Location';\n        const eventUrl = event.url || '#';\n\n        return `\n<li class=\"cards__item\" data-id=\"${event.id}\">\n          <img src=\"${imgUrl}\" alt=\"${artist}\" class=\"cards__img\" />\n          <h4 class=\"cards__event\">${artist}</h4>\n          <p class=\"cards__date\">${date}</p>\n        <a href=\"${eventUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cards__location\">\n          <svg class=\"cards__icon\">\n            <use href=\"/imgs/icons/symbol-defs.svg#location\"></use>\n          </svg>\n          ${location}\n        </a>\n      </li>\n    `});\n\n  return markUp.join('');\n}\n","import EventsApiService from './fetchEvents';\nimport markUpEvents from '../templates/card';\nimport { renderPagination } from './pagination';\n\nconst list = document.getElementById('js-list');\nconst paginationList = document.querySelector('.pagination__list');\nconst search = document.getElementById('searchInput');\nconst form = document.getElementById('headerForm');\n\nconst eventsApiService = new EventsApiService();\n\nsearch.addEventListener('input', onSearchQuery);\n\nasync function onSearchQuery(e) {\n  e.preventDefault()\n    \n    eventsApiService.searchQuery = search.value.trim();\n    eventsApiService.page = 0;\n    clearEventsList();\n    clearPagination();\n\n    await renderEvent();\n}\n\nrenderEvent();\n\nexport default async function renderEvent() {\n    try {\n        const data = await eventsApiService.fetchEvents();\n        const events = data._embedded?.events || [];\n        const markUp = markUpEvents(events);\n\n        list.insertAdjacentHTML('beforeend', markUp);\n        // const totalPages = data.page.totalPages;\n        // renderPagination(totalPages, eventsApiService.page, onPageClick);\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction clearEventsList() {\n    list.innerHTML = '';\n}\n\nfunction onPageClick(newPage) {\n    if (newPage === eventsApiService.page) return;\n    eventsApiService.page = newPage;\n    clearEventsList();\n    renderEvent();\n}\n\nfunction clearPagination() {\n  paginationList.innerHTML = '';\n}","export default function modalMarkUp(modal) {\n    return `\n    <div class=\"modal\" id=\"js-modal\">\n        <button type=\"button\" class=\"modal__btn-close\">\n            <svg class=\"modal__icon-close\">\n                <use href=\"/imgs/icons/symbol-defs.svg#close\"></use>\n            </svg>\n        </button>\n\n        <img src=\"/imgs/modal/artist.png\" alt=\"\" class=\"modal__img\" />\n\n        <div class=\"modal__box\">\n            <img src=\"/imgs/modal/main-img.png\" alt=\"\" class=\"modal__main-img\" />\n\n            <div class=\"modal__info\">\n                <h4 class=\"modal__title\">INFO</h4>\n                <p class=\"modal__text\">Atlas Weekend is the largest music festival in Ukraine.\n                    More than 200 artists will create a proper music festival atmosphere on 10 stages</p>\n\n                <h4 class=\"modal__title\">WHEN</h4>\n                <p class=\"modal__text modal__text--none\">2021-06-09</p>\n                <p class=\"modal__text\">20:00 (Kyiv/Ukraine)</p>\n\n                <h4 class=\"modal__title\">WHERE</h4>\n                <p class=\"modal__text modal__text--none\">Kyiv, Ukraine</p>\n                <p class=\"modal__text\">VDNH</p>\n\n                <h4 class=\"modal__title\">WHO</h4>\n                <p class=\"modal__text\">The Black Eyed Peas</p>\n\n                <h4 class=\"modal__title\">PRICES</h4>\n                <p class=\"modal__tex modal__text-ticket\">\n                    <svg class=\"modal__ticket\">\n                        <use href=\"../imgs/icons/symbol-defs.svg#ticket\"></use>\n                    </svg> Standart 300-500 UAH\n                </p>\n                <button class=\"modal__buy-btn\">BUY TICKETS</button>\n\n                <p class=\"modal__text modal__text-ticket\">\n                    <svg class=\"modal__ticket\">\n                        <use href=\"../imgs/icons/symbol-defs.svg#ticket\"></use>\n                    </svg>\n                    VIP 1000-1500 UAH\n                </p>\n                <button class=\"modal__buy-btn\">BUY TICKETS</button>\n            </div>\n        </div>\n        <button class=\"modal__more-btn\">MORE FROM THIS AUTHOR</button>\n\n    </div>\n    `\n}","import modalMarkUp from \"../templates/modalCard\";\nimport EventsApiService from \"./fetchEvents\";\n\nconst eventsList = document.getElementById('js-list');\nconst modalCard = document.getElementById('modal-card');\n\nconst eventsApiService = new EventsApiService();\n\neventsList.addEventListener('click', openModalCard);\n\nexport default async function openModalCard(e) {\n    const card = e.target.closest('.cards__item');\n\n    if (!card) return;\n\n    const eventId = card.dataset.id;\n\n    try {\n        const eventData = await eventsApiService.fetchEvents('1a9Zk7Y34xAZe56');\n        // const eventData = await eventsApiService.fetchEvents({ id: eventId });\n\n        const markUp = modalMarkUp(eventData);\n\n        modalCard.insertAdjacentHTML('beforeend', markUp);\n        modalCard.classList.remove('hidden');\n        modalCard.addEventListener('click', onModalClose);\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction onModalClose(e) {\n    if (e.target.classList.contains('modal__btn-close') || e.target === modalCard) {\n        modalCard.classList.add('hidden');\n        modalCard.removeEventListener('click', onModalClose);\n        modalCard.innerHTML = '';\n    }\n}"],"names":["EventsApiService","__privateAdd","_API_KEY","_BASE_URL","id","searchParams","__privateGet","url","response","markUpEvents","events","event","imgUrl","_a","artist","date","location","_b","eventUrl","list","paginationList","search","eventsApiService","onSearchQuery","clearEventsList","clearPagination","renderEvent","markUp","error","modalMarkUp","modal","eventsList","modalCard","openModalCard","card","eventData","onModalClose"],"mappings":"+8BAAe,MAAMA,CAAiB,CAIpC,aAAc,CAHdC,EAAA,KAAAC,EAAW,oCACXD,EAAA,KAAAE,EAAY,yDAGV,KAAK,KAAO,EACZ,KAAK,SAAW,GAChB,KAAK,YAAc,EACpB,CAED,MAAM,YAAY,CAAE,GAAAC,EAAK,IAAI,EAAK,CAAA,EAAI,CACpC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,OAAQC,EAAA,KAAKJ,GACb,KAAM,KAAK,KACX,KAAM,KAAK,SACX,QAAS,KAAK,WACpB,CAAK,EACKK,EAAMH,EAAK,GAAGE,EAAA,KAAKH,EAAS,IAAIC,CAAE,IAAIC,CAAY,GAAK,GAAGC,EAAA,KAAKH,EAAS,IAAIE,CAAY,4BAExFG,EAAW,MAAM,MAAMD,CAAG,EAEhC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,wBAAwB,EAE1C,OAAOA,EAAS,MACjB,CACH,CAzBEN,EAAA,YACAC,EAAA,YCFa,SAASM,EAAaC,EAAQ,CAwB3C,OAvBeA,EACZ,IACCC,GAAS,SACP,MAAMC,IAASC,EAAAF,EAAM,OAAO,CAAC,IAAd,YAAAE,EAAiB,MAAO,GACjCC,EAASH,EAAM,MAAQ,kBACvBI,EAAOJ,EAAM,MAAM,MAAM,WAAa,eACtCK,IAAWC,EAAAN,EAAM,YAAN,YAAAM,EAAiB,OAAO,GAAG,OAAQ,mBAC9CC,EAAWP,EAAM,KAAO,IAE9B,MAAO;AAAA,mCACoBA,EAAM,EAAE;AAAA,sBACrBC,CAAM,UAAUE,CAAM;AAAA,qCACPA,CAAM;AAAA,mCACRC,CAAI;AAAA,mBACpBG,CAAQ;AAAA;AAAA;AAAA;AAAA,YAIfF,CAAQ;AAAA;AAAA;AAAA,KAGf,CAAC,EAEU,KAAK,EAAE,CACvB,CCrBA,MAAMG,EAAO,SAAS,eAAe,SAAS,EACxCC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAS,SAAS,eAAe,aAAa,EACvC,SAAS,eAAe,YAAY,EAEjD,MAAMC,EAAmB,IAAItB,EAE7BqB,EAAO,iBAAiB,QAASE,CAAa,EAE9C,eAAeA,EAAc,EAAG,CAC9B,EAAE,eAAgB,EAEhBD,EAAiB,YAAcD,EAAO,MAAM,KAAI,EAChDC,EAAiB,KAAO,EACxBE,IACAC,IAEA,MAAMC,EAAW,CACrB,CAEAA,IAEe,eAAeA,GAAc,OACxC,GAAI,CAEA,MAAMhB,IAASG,GADF,MAAMS,EAAiB,eAChB,YAAL,YAAAT,EAAgB,SAAU,CAAA,EACnCc,EAASlB,EAAaC,CAAM,EAElCS,EAAK,mBAAmB,YAAaQ,CAAM,CAG9C,OAAQC,EAAO,CACZ,QAAQ,MAAMA,CAAK,CACtB,CACL,CAEA,SAASJ,GAAkB,CACvBL,EAAK,UAAY,EACrB,CASA,SAASM,GAAkB,CACzBL,EAAe,UAAY,EAC7B,CCrDe,SAASS,EAAYC,EAAO,CACvC,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAkDX,CChDA,MAAMC,EAAa,SAAS,eAAe,SAAS,EAC9CC,EAAY,SAAS,eAAe,YAAY,EAEhDV,EAAmB,IAAItB,EAE7B+B,EAAW,iBAAiB,QAASE,CAAa,EAEnC,eAAeA,EAAc,EAAG,CAC3C,MAAMC,EAAO,EAAE,OAAO,QAAQ,cAAc,EAE5C,GAAKA,EAEW,CAAAA,EAAK,QAAQ,GAE7B,GAAI,CACA,MAAMC,EAAY,MAAMb,EAAiB,YAAY,iBAAiB,EAGhEK,EAASE,EAAYM,CAAS,EAEpCH,EAAU,mBAAmB,YAAaL,CAAM,EAChDK,EAAU,UAAU,OAAO,QAAQ,EACnCA,EAAU,iBAAiB,QAASI,CAAY,CACnD,OAAQR,EAAO,CACZ,QAAQ,MAAMA,CAAK,CACtB,EACL,CAEA,SAASQ,EAAa,EAAG,EACjB,EAAE,OAAO,UAAU,SAAS,kBAAkB,GAAK,EAAE,SAAWJ,KAChEA,EAAU,UAAU,IAAI,QAAQ,EAChCA,EAAU,oBAAoB,QAASI,CAAY,EACnDJ,EAAU,UAAY,GAE9B"}