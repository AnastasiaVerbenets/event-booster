{"version":3,"file":"index.js","sources":["../src/js/fetchEvents.js","../src/templates/card.js","../src/js/pagination.js","../src/js/baseMarkUp.js","../src/js/header/fetchCountries.js"],"sourcesContent":["export default class EventsApiService {\n  #API_KEY = 'cAC0PQfupJc4LZexavuatT33ADOVunkK';\n  #BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\n  constructor() {\n    this.page = 0;\n    this.pageSize = 12;\n  }\n\n  getApiKey() {\n    return this.#API_KEY;\n  }\n\n  getBaseUrl() {\n    return this.#BASE_URL;\n  }\n\n  async fetchEvents() {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n      page: this.page,\n      size: this.pageSize,\n    });\n    const url = `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch events');\n    }\n    return response.json();\n  }\n}\n\n","export default function markUpEvents(events) {\n  const markUp = events\n    .map(\n      event => {\n        const imgUrl = event.images[0]?.url || '';\n        const artist = event.name || 'No name avaible';\n        const date = event.dates.start.localDate || 'Unknown Date';\n        const location = event._embedded?.venues[0].name || 'Unknown Location';\n        const eventUrl = event.url || '#';\n\n        return `\n<li class=\"cards__item\">\n          <img src=\"${imgUrl}\" alt=\"${artist}\" class=\"cards__img\" />\n          <h4 class=\"cards__event\">${artist}</h4>\n          <p class=\"cards__date\">${date}</p>\n        <a href=\"${eventUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cards__location\">\n          <svg class=\"cards__icon\">\n            <use href=\"/imgs/icons/symbol-defs.svg#location\"></use>\n          </svg>\n          ${location}\n        </a>\n      </li>\n    `});\n\n  return markUp.join('');\n}\n","export function renderPagination(totalPages, currentPage, onPageClick) {\n  const paginationList = document.querySelector('.pagination__list');\n\n  const paginationButtons = getPaginationButtons(totalPages, currentPage);\n\n  const buttonsMarkUp = paginationButtons\n    .map(page => {\n      if (page === '...') {\n        return `      <li class=\"pagination__list__item\">\n        <span class=\"pagination__dots\">...</span>\n      </li>`;\n      }\n\n      return `      <li class=\"pagination__list__item\">\n        <button class=\"pagination__list__button ${\n          page === currentPage ? 'active' : ''\n        }\" data-page=${page}>${page + 1}</button>\n      </li>`;\n    })\n    .join('');\n\n  paginationList.insertAdjacentHTML('beforeend', buttonsMarkUp);\n\n  paginationList.addEventListener('click', onPaginationClick);\n\n  function onPaginationClick(e) {\n    if (e.target.tagName !== 'BUTTON') return;\n    const newPage = Number(e.target.dataset.page);\n    if (newPage === currentPage) return;\n    onPageClick(newPage);\n  }\n}\n\nfunction getPaginationButtons(totalPages, currentPage) {\n  const buttons = [];\n  const maxVisibleButtons = 5;\n  if (totalPages <= maxVisibleButtons) {\n    for (let i = 0; i < totalPages; i++) {\n      buttons.push(i);\n    }\n  } else {\n    if (currentPage > 1) buttons.push(0);\n    if (currentPage > 2) buttons.push('...');\n\n    const start = Math.max(0, currentPage - 1);\n    const end = Math.min(totalPages, currentPage + 2);\n\n    for (let i = start; i < end; i++) {\n      buttons.push(i);\n    }\n    if (currentPage < totalPages - 3) buttons.push('...');\n    if (currentPage < totalPages - 1) buttons.push(totalPages - 1);\n  }\n  return buttons;\n}\n","import EventsApiService from './fetchEvents';\nimport markUpEvents from '../templates/card';\nimport { renderPagination } from './pagination';\n\nconst list = document.getElementById('js-list');\nconst paginationList = document.querySelector('.pagination__list');\n\nconst eventsApiService = new EventsApiService();\n\nrenderEvent();\n\nexport default async function renderEvent() {\n  try {\n    const data = await eventsApiService.fetchEvents();\n    const events = data._embedded?.events || [];\n    const markUp = markUpEvents(events);\n\n    list.insertAdjacentHTML('beforeend', markUp);\n    const totalPages = data.page.totalPages;\n    renderPagination(totalPages, eventsApiService.page, onPageClick);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction clearEventsList() {\n  list.innerHTML = '';\n}\n\nfunction onPageClick(newPage) {\n  if (newPage === eventsApiService.page) return;\n  eventsApiService.page = newPage;\n  clearEventsList();\n  renderEvent();\n}\n","async function renderCountries() {\n  try {\n    const countries = [\n      { code: 'US', name: 'USA', region: 'NorthAmerica' },\n      { code: 'CA', name: 'Canada', region: 'NorthAmerica' },\n      { code: 'MX', name: 'Mexico', region: 'NorthAmerica' },\n      { code: 'AR', name: 'Argentina', region: 'SouthAmerica' },\n      { code: 'BR', name: 'Brazil', region: 'SouthAmerica' },\n      { code: 'CO', name: 'Colombia', region: 'SouthAmerica' },\n      { code: 'PE', name: 'Peru', region: 'SouthAmerica' },\n      { code: 'VE', name: 'Venezuela', region: 'SouthAmerica' },\n      { code: 'UY', name: 'Uruguay', region: 'SouthAmerica' },\n      { code: 'AT', name: 'Austria', region: 'Europe' },\n      { code: 'BE', name: 'Belgium', region: 'Europe' },\n      { code: 'BG', name: 'Bulgaria', region: 'Europe' },\n      { code: 'DE', name: 'Germany', region: 'Europe' },\n      { code: 'ES', name: 'Spain', region: 'Europe' },\n      { code: 'FR', name: 'France', region: 'Europe' },\n      { code: 'GB', name: 'Great Britain', region: 'Europe' },\n      { code: 'IT', name: 'Italy', region: 'Europe' },\n      { code: 'PL', name: 'Poland', region: 'Europe' },\n      { code: 'PT', name: 'Portugal', region: 'Europe' },\n      { code: 'RU', name: 'Russia', region: 'Europe' },\n      { code: 'SE', name: 'Sweden', region: 'Europe' },\n      { code: 'CN', name: 'China', region: 'Asia' },\n      { code: 'IN', name: 'India', region: 'Asia' },\n      { code: 'JP', name: 'Japan', region: 'Asia' },\n      { code: 'KR', name: 'Korea', region: 'Asia' },\n      { code: 'SG', name: 'Singapore', region: 'Asia' },\n      { code: 'TH', name: 'Thailand', region: 'Asia' },\n      { code: 'TR', name: 'Turkey', region: 'Asia' },\n      { code: 'IL', name: 'Israel', region: 'Asia' },\n      { code: 'AE', name: 'UAE', region: 'Asia' },\n      { code: 'SA', name: 'Saudi Arabia', region: 'Asia' },\n      { code: 'ZA', name: 'South Africa', region: 'Africa' },\n      { code: 'NG', name: 'Nigeria', region: 'Africa' },\n      { code: 'EG', name: 'Egypt', region: 'Africa' },\n      { code: 'KE', name: 'Kenya', region: 'Africa' },\n      { code: 'AU', name: 'Australia', region: 'Oceania' },\n      { code: 'NZ', name: 'New Zealand', region: 'Oceania' },\n    ];\n\n    const select = document.querySelector('.header__select');\n    const selectedFlag = document.getElementById('selectedFlag');\n    const dropdown = document.querySelector('.header__dropdown');\n\n    function createOption(country) {\n      const flagSrc = `/imgs/header/flags/${country.code.toLowerCase()}.png`;\n\n      return `\n        <li class=\"select__option\">\n          <img src=\"${flagSrc}\" alt=\"${country.name}\" class=\"flag__img\">\n          ${country.name}\n        </li>\n      `;\n    }\n\n    select.addEventListener('click', () => {\n      select.classList.toggle('open');\n      countries.forEach(country => {\n        dropdown.insertAdjacentHTML('beforeend', createOption(country));\n      });\n    });\n\n    dropdown.addEventListener('click', e => {\n      const option = e.target.closest('.select__option');\n      if (option) {\n        const countryName = option.textContent.trim();\n        const selectedCountry = countries.find(\n          country => country.name === countryName\n        );\n\n        selectedFlag.src = `/imgs/header/flags/${selectedCountry.code.toLowerCase()}.png`;\n        selectedFlag.alt = selectedCountry.name;\n        select.classList.remove('open');\n      }\n    });\n\n    document.addEventListener('click', () => {\n      select.classList.remove('open');\n    });\n\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nrenderCountries();\n"],"names":["EventsApiService","__privateAdd","_API_KEY","_BASE_URL","__privateGet","searchParams","url","response","markUpEvents","events","event","imgUrl","_a","artist","date","location","_b","eventUrl","renderPagination","totalPages","currentPage","onPageClick","paginationList","buttonsMarkUp","getPaginationButtons","page","onPaginationClick","e","newPage","buttons","i","start","end","list","eventsApiService","renderEvent","data","markUp","error","clearEventsList","renderCountries","createOption","country","countries","select","selectedFlag","dropdown","option","countryName","selectedCountry"],"mappings":"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"}