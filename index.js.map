{"version":3,"file":"index.js","sources":["../src/js/fetchEvents.js","../src/templates/card.js","../src/js/pagination.js","../src/js/baseMarkUp.js","../src/templates/modalCard.js","../src/js/modalCardsRender.js"],"sourcesContent":["export default class EventsApiService {\n  #API_KEY = 'cAC0PQfupJc4LZexavuatT33ADOVunkK';\n  #BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\n  constructor() {\n    this.page = 0;\n    this.pageSize = 12;\n    this.searchQuery = '';\n  }\n\n  async fetchEvents() {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n      page: this.page,\n      size: this.pageSize,\n      keyword: this.searchQuery,\n      sort: 'random',\n    });\n\n    const url = `${this.#BASE_URL}?${searchParams}&classificationName=music`;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch events');\n    }\n    return response.json();\n  }\n\n\n  async fetchEventsById(id) {\n    const searchParams = new URLSearchParams({\n      apikey: this.#API_KEY,\n    });\n\n    const url = `https://app.ticketmaster.com/discovery/v2/events/${id}.json?${searchParams}`;\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch events');\n    }\n    return response.json();\n  }\n}\n\n\n","export default function markUpEvents(events) {\n  const markUp = events\n    .map(\n      event => {\n        const imgUrl = event.images[2]?.url || '';\n        const artist = event.name || 'No name avaible';\n        const date = event.dates.start.localDate || 'Unknown Date';\n        const location = event._embedded?.venues[0].name || 'Unknown Location';\n        const eventUrl = event.url || '#';\n\n        return `\n      <li class=\"cards__item\" data-id=\"${event.id}\">\n          <img src=\"${imgUrl}\" alt=\"${artist}\" class=\"cards__img\" />\n          <h4 class=\"cards__event\">${artist}</h4>\n          <p class=\"cards__date\">${date}</p>\n        <a href=\"${eventUrl}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"cards__location\">\n          <svg class=\"cards__icon\">\n            <use href=\"/imgs/icons/symbol-defs.svg#location\"></use>\n          </svg>${location}\n        </a>\n      </li>\n    `});\n\n  return markUp.join('');\n}\n","export function renderPagination(totalPages, currentPage, onPageClick) {\n  const paginationList = document.querySelector('.pagination__list');\n  paginationList.innerHTML = '';\n\n  const paginationButtons = getPaginationButtons(totalPages, currentPage);\n\n  const buttonsMarkUp = paginationButtons\n    .map(page => {\n      if (page === '...') {\n        return `<li class=\"pagination__list__item\">\n          <span class=\"pagination__dots\">...</span>\n        </li>`;\n      }\n      return `<li class=\"pagination__list__item\">\n        <button class=\"pagination__list__button ${\n          page === currentPage ? 'active' : ''\n        }\" data-page=\"${page}\">${page + 1}</button>\n      </li>`;\n    })\n    .join('');\n\n  paginationList.insertAdjacentHTML('beforeend', buttonsMarkUp);\n\n  paginationList.addEventListener('click', onPaginationClick);\n\n  function onPaginationClick(e) {\n    if (e.target.tagName !== 'BUTTON') return;\n    const newPage = Number(e.target.dataset.page);\n    if (newPage === currentPage) return;\n    onPageClick(newPage);\n  }\n}\n\nfunction getPaginationButtons(totalPages, currentPage) {\n  const buttons = [];\n  const maxVisibleButtons = 5;\n\n  if (totalPages <= maxVisibleButtons) {\n    for (let i = 0; i < totalPages; i++) {\n      buttons.push(i);\n    }\n  } else {\n    if (currentPage > 2) buttons.push(0);\n    if (currentPage > 3) buttons.push('...');\n\n    const start = Math.max(0, currentPage - 1);\n    const end = Math.min(totalPages, currentPage + 2);\n\n    for (let i = start; i < end; i++) {\n      buttons.push(i);\n    }\n\n    if (currentPage < totalPages - 3) buttons.push('...');\n    if (currentPage < totalPages - 2) buttons.push(totalPages - 1);\n  }\n\n  return buttons;\n}\n","import EventsApiService from './fetchEvents';\nimport markUpEvents from '../templates/card';\nimport { renderPagination } from './pagination';\n\nconst list = document.getElementById('js-list');\nconst paginationList = document.querySelector('.pagination__list');\nconst search = document.getElementById('searchInput');\nconst form = document.getElementById('headerForm');\n\nconst eventsApiService = new EventsApiService();\n\nrenderEvent();\n\nsearch.addEventListener('input', onSearchQuery);\n\nasync function onSearchQuery(e) {\n    e.preventDefault()\n\n    eventsApiService.searchQuery = search.value.trim();\n    eventsApiService.page = 0;\n    clearEventsList();\n    clearPagination();\n\n    await renderEvent();\n}\n\nexport default async function renderEvent() {\n    try {\n        const data = await eventsApiService.fetchEvents();\n        const events = data._embedded?.events || [];\n        const markUp = markUpEvents(events);\n\n        list.insertAdjacentHTML('beforeend', markUp);\n        const totalPages = data.page.totalPages;\n        renderPagination(totalPages, eventsApiService.page, onPageClick);\n    } catch (error) {\n        console.error(error.status);\n    }\n}\n\nfunction clearEventsList() {\n    list.innerHTML = '';\n}\n\nfunction onPageClick(newPage) {\n    if (newPage === eventsApiService.page) return;\n    eventsApiService.page = newPage;\n    clearEventsList();\n    renderEvent();\n}\n\nfunction clearPagination() {\n    paginationList.innerHTML = '';\n}","export default function modalMarkUp(event) {\n    const imgUrl = event.images[2]?.url || '';\n    const description = event.info || event.description || 'No description available';\n    const date = event.dates.start.localDate || 'Unknown Date';\n    const time = formatTime(event.dates.start.localTime);\n    const location = event._embedded.venues[0]?.name || 'Unknown Location';\n    const city = event._embedded.venues[0]?.city.name || '';\n    const country = event._embedded.venues[0]?.country.name || '';\n    const artist = event.name || 'No name avaible';\n\n    const priceRanges = event.priceRanges || [];\n    const standardPrice = priceRanges.find(price => price.type === 'standard') || '';\n    const vipPrice = priceRanges.find(price => price.type === 'vip') || '';\n    const standardMin = Math.round(standardPrice.min);\n    const standardMax = Math.round(standardPrice.max);\n    const vipMin = Math.round(vipPrice.min);\n    const vipMax = Math.round(vipPrice.max);\n\n    const vipBox = vipPrice ? `\n        <p class=\"modal__text modal__text-ticket\">\n           <img src=\"/imgs/icons/ticket.svg\" alt=\"\" class=\"modal__ticket\">\n            VIP ${vipMin}-${vipMax} ${vipPrice.currency}\n        </p>\n        <button class=\"modal__buy-btn\">BUY TICKETS</button>\n    ` : `\n        <p class=\"modal__text modal__text-ticket\">\n        <img src=\"/imgs/icons/ticket.svg\" alt=\"\" class=\"modal__ticket\">\n             VIP tickets are not available\n        </p>\n    `;\n\n    function formatTime(timeString) {\n        if (!timeString) return 'Unknown Time';\n        const [hours, minutes] = timeString.split(':');\n        return `${hours}:${minutes}`;\n    };\n\n    return `\n    <div class=\"modal\">\n        <button type=\"button\" class=\"modal__btn-close\" >\n            <svg class=\"modal__icon-close\">\n                <use href=\"/imgs/icons/symbol-defs.svg#close\"></use>\n            </svg>\n        </button>\n\n        <img src=\"${imgUrl}\" alt=\"${artist}\" class=\"modal__img\" />\n\n        <div class=\"modal__box\">\n            <img src=\"${imgUrl}\" alt=\"${artist}\" class=\"modal__main-img\" />\n\n            <div class=\"modal__info\">\n                <h4 class=\"modal__title\">INFO</h4>\n                <p class=\"modal__text modal__description \">${description}</p>\n\n                <h4 class=\"modal__title\">WHEN</h4>\n                <p class=\"modal__text modal__text--none\">${date}</p>\n                <p class=\"modal__text\">${time} (${city}/${country})</p>\n\n                <h4 class=\"modal__title\">WHERE</h4>\n                <p class=\"modal__text modal__text--none\">${location}</p>\n                <p class=\"modal__text\">${city}, ${country}</p>\n\n                <h4 class=\"modal__title\">WHO</h4>\n                <p class=\"modal__text\">${artist}</p>\n\n                <h4 class=\"modal__title\">PRICES</h4>\n                <p class=\"modal__text modal__text-ticket\">\n                    <img src=\"/imgs/icons/ticket.svg\" alt=\"\" class=\"modal__ticket\"> \n                    Standart ${standardMin}-${standardMax} ${standardPrice.currency}\n                </p>\n                <button class=\"modal__buy-btn\">BUY TICKETS</button>\n                ${vipBox}\n            </div>\n        </div>\n        <button class=\"modal__more-btn\" id=\"more-btn\">MORE FROM THIS AUTHOR</button>\n    </div>\n    `;\n}","import modalMarkUp from \"../templates/modalCard\";\nimport EventsApiService from \"./fetchEvents\";\n\nconst eventsList = document.getElementById('js-list');\nconst modalCard = document.getElementById('modal-card');\n\nconst eventsApiService = new EventsApiService();\n\neventsList.addEventListener('click', openModalCard);\n\nexport default async function openModalCard(e) {\n    const card = e.target.closest('.cards__item');\n\n    if (!card) return;\n\n    const eventId = card.dataset.id;\n\n    console.log(eventId);\n\n    try {\n        const eventData = await eventsApiService.fetchEventsById(eventId);\n\n        const markUp = modalMarkUp(eventData);\n\n        modalCard.insertAdjacentHTML('beforeend', markUp);\n        modalCard.classList.remove('hidden');\n        modalCard.addEventListener('click', onModalClose);\n    } catch (error) {\n        console.error(error);\n    }\n}\n\nfunction onModalClose(e) {\n    if (e.target.classList.contains('modal__btn-close') || e.target === modalCard) {\n        modalCard.classList.add('hidden');\n        modalCard.removeEventListener('click', onModalClose);\n        modalCard.innerHTML = '';\n    }\n}"],"names":["EventsApiService","__privateAdd","_API_KEY","_BASE_URL","searchParams","__privateGet","url","response","id","markUpEvents","events","event","imgUrl","_a","artist","date","location","_b","eventUrl","renderPagination","totalPages","currentPage","onPageClick","paginationList","buttonsMarkUp","getPaginationButtons","page","onPaginationClick","e","newPage","buttons","i","start","end","list","search","eventsApiService","renderEvent","onSearchQuery","clearEventsList","clearPagination","data","markUp","error","modalMarkUp","description","time","formatTime","city","_c","country","_d","priceRanges","standardPrice","price","vipPrice","standardMin","standardMax","vipMin","vipMax","vipBox","timeString","hours","minutes","eventsList","modalCard","openModalCard","card","eventId","eventData","onModalClose"],"mappings":"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"}